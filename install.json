{
   "resources": {
      "head": [
         {
            "type": "script",
            "src": "./source/app.js"
         }
      ]
   },
         "hooks": [
        {
          "endpoint": "https://s.trebble.fm/hooks/v1/cloudflare/onUserAuthenticated",
          "events": ["oauth-login"],
          "block": true,
          "authenticate": ["account"],
          "failure": {
            "action": "notify",
            "message": "There was an error communicating with Trebble."
          }
        }
      ],
   "options": {
      "properties": {
         "trebbleUserId": {
            "title": "Trebble Account",
            "description": "Login or choose the user account who owns the Trebble you want to embed.",
            "type": "object",
            "format": "account",
            "order": 1,
            "services": [
               "Trebble"
            ]
         },
         "trebbleId": {
            "title": "Trebble URL",
            "type": "string",
            "description": "The unique identifier of the Trebble to be embedded.",
            "order": 3,
            "default": "",
            "showIf": {
               "myTrebbleToEmbed": {
                  "op": "==",
                  "value": "chooseAnotherTrebbleToEmbed"
               }
            }
         },
          "myTrebbleToEmbed": {
            "default": "chooseAnotherTrebbleToEmbed",
            "title": "Trebble to embed",
            "type": "string",
            "order": 2,
            "enum": [
                "chooseAnotherTrebbleToEmbed"
            ],
            "enumNames": {
               "chooseAnotherTrebbleToEmbed":"Choose another Trebble to embed ..."
            },
            "showIf": {
               "trebbleUserId": {
                  "op": "!=",
                  "value": null
               }
            }
         },
         "whereToAppend": {
            "default": "AfterThePage",
            "title": "Location",
            "type": "string",
            "order": 3,
            "enum": [
               "BeforeThePage",
               "AfterThePage",
               "ChooseYourOwn"
            ],
            "enumNames": {
               "BeforeThePage": "Before the page content",
               "AfterThePage": "After the page content",
               "ChooseYourOwn": "Choose your own location ..."
            }
         },
         "alwaysVisibible": {
            "title": "Always Visible",
            "type": "boolean",
            "default": true,
            "order": 5,
            "showIf": {
               "whereToAppend": {
                  "op": "!=",
                  "value": "ChooseYourOwn"
               }
            }
         },
         "location": {
            "default": {
               "selector": "body",
               "method": "prepend"
            },
            "title": "Choose your own location",
            "type": "object",
            "format": "element",
            "description": "Select where on the page would you like the Trebble widget to appear.",
            "order": 4,
            "showIf": {
               "whereToAppend": "ChooseYourOwn"
            }
         },
         "widthFitContainer": {
            "title": "Expand horizontally",
            "type": "boolean",
            "default": true,
            "order": 5,
            "showIf": {
               "whereToAppend": "ChooseYourOwn"
            }
         },
         "customWidth": {
            "title": "Custom Width",
            "type": "integer",
            "default": 300,
            "minimum": 200,
            "order": 6,
            "description": "Enter the width of the trebble widget in pixel.",
            "showIf": {
               "widthFitContainer": false,
               "whereToAppend": "ChooseYourOwn"
            }
         },
         "heightFitContainer": {
            "title": "Expand vertically",
            "type": "boolean",
            "default": false,
            "order": 7,
            "showIf": {
               "whereToAppend": "ChooseYourOwn"
            }
         },
         "customHeight": {
            "title": "Custom Height",
            "type": "integer",
            "default": 400,
            "minimum": 150,
            "order": 8,
            "description": "Enter the height of the trebble widget in pixel.",
            "showIf": {
               "heightFitContainer": false,
               "whereToAppend": "ChooseYourOwn"
            }
         }
      },
      "preview": {
         "handlers": [
            {
               "options": [
                  "trebbleId",
                  "trebbleUserId",
                  "widthFitContainer",
                  "customWidth",
                  "heightFitContainer",
                  "customHeight"
               ],
               "reload": false,
               "execute": "INSTALL_SCOPE.setOptions(INSTALL_OPTIONS)"
            }
         ]
      }

  }
}